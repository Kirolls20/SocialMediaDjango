{% extends 'base.html' %}
{% load static %}
{% load hitcount_tags  %}
{% block title %}
blog details
{% endblock %}

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block css %}
    <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css"
            integrity="sha512-SbiR/eusphKoMVVXysTKG/7VseWii+Y3FdHrt0EpKgpToZeemhqHeZeLWLhJutz/2ut2Vw1uQEj2MbRF+TVBUA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer" />
        <link href="{% static 'css/project.css' %}" rel="stylesheet" />
        <!-- This is custom css static file  -->
        <link href="{% static 'css/blog_details.css' %}" rel="stylesheet" />

        
    {% endblock %}
</head>
<body>
    {% block content %}
        <div class="blog-container">
            <div class="blog-post">
                <a href="{% url 'home' %}" style="text-decoration: none;">
                    <i class="fa-solid fa-house fa-xl"></i>Back
                </a>
                <h1 class="title">{{blog.title}}</h1>
                <p class="author">Author: {{blog.author}}</p>
                <p class="date"> Views: {{ hitcount.total_hits }}</p>
                {% if blog.tags.all %}
                <p class="author">Tags: {% for tag in blog.tags.all%}{{tag}}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
                {% endif %}
                <p class="date">Date: {{blog.pub_date}}</p>
                <div class="body">
                    <p>{{blog.body}}</p>       
                    <!-- Add more content here -->
                    {% if blog.image %}
                        <img src="{{blog.image.url}}" alt="image" class="blog-image">
                    {% endif %}
                </div>
                <div class="actions">
                    <div class="comment-container">
                        <form action="{% url 'blog_details' blog.id %}" method="post">
                            {% csrf_token %}
                            <input type="text" name="comment" id="comment" placeholder="type your comment here..">
                            <button class="comment-btn" type="submit">Comment</button>
                        </form>
                    </div>
                    <form action="{% url 'like' blog.id %}" method="post">
                        {% csrf_token %}
                        {% if request.user in blog.likes.all %}
                        <button type="submit" style="background-color: white;">
                            <i class="fa-solid fa-heart fa-2xl" style="color: #d62069;"></i>
                        </button> {{blog.likes.all.count}}
                        {% else %}
                        <button type="submit" style="background-color: white;">
                            <i class="fa-regular fa-heart fa-2xl" style="color: #d62069;"></i>
                        </button> {{blog.likes.all.count}}
                        {% endif %}                   
                    </form>
                </div>
                <div class="list-group">
                    <button type="button" class="list-group-item list-group-item-action active" aria-current="true">
                      Comments- {{blog.comments.all.count}}
                    </button>
                    {% for comment in comments %}
                    <button type="button" class="list-group-item list-group-item-action">{{comment.user.username}} - {{comment.comment}}</button>
                    {% endfor %}
                  </div>
        </div>
    {% endblock %}
</body>