{% extends 'base.html' %}
{% load static %}
{% load hitcount_tags  %}
{% block title %}
Question Details
{% endblock %}

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block css %}
    <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css"
            integrity="sha512-SbiR/eusphKoMVVXysTKG/7VseWii+Y3FdHrt0EpKgpToZeemhqHeZeLWLhJutz/2ut2Vw1uQEj2MbRF+TVBUA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer" />
        <link href="{% static 'css/project.css' %}" rel="stylesheet" />
        <!-- This is custom css static file  -->
        <link href="{% static 'css/blog_details.css' %}" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
    {% endblock %}
</head>
<body>
    {% block content %}
        <div class="blog-container">
            <div class="blog-post">
                <a href="{% url 'question_home' %}" style="text-decoration:none;">
                    <i class="fa-solid fa-house fa-xl"></i>Back
                </a>
                
                <!-- User image -->
                {% if request.user.profile_image %}
                    <img  class="profile-image" src="{{request.user.profile_image.url }}" alt="" > 
                {% else %}
                    <img class="profile-image" src="{% static 'images/default_profile_pic.jpg' %}" alt="" >
                {% endif %}
                <p class="author"><a href="{% url 'users:detail' request.user.username request.user.id%}">Author: {{question.author}}</a></p>
                {% if blog.tags.all %}
                <p class="tags">Tags: {% for tag in question.tags.all%} <span class="tag">{{tag}}</span> {% if not forloop.last %}  {% endif %}{% endfor %}</p>
                {% endif %}
                <p class="date">published in: {{question.pub_date}}</p>
                <h1 class="title">{{question.question}}</h1>
                <!-- Like and comments  -->
                <div class="comments" style="display: inline; margin-left:10px;"> 
                    <form action="{% url 'answer_question' question.id %}" method="post">
                        {% csrf_token %}
                        <input type="text" name="answer" id="comment" placeholder="type your answer here..">
                        <button class="comment-btn" type="submit">Answer</button>
    
                    </form>
                </div>
                <div class="blog-details">
                    <button id='like-button' data-question-id='{{question.id}}' data-csrf-token='{% csrf_token %}' style='background-color: inherit; border:0;'>
                       {% if request.user in question.likes.all %}
                        <i class="fa-solid fa-heart fa-xl" style="color: #d62069;"></i>
                        {% else %}
                        <i class="fa-regular fa-heart fa-xl" style="color: #d62069;"></i>
                        {% endif %}
                    </button>
                    <span id="likes-count">{{ count_likes }}</span> 
                    
                    <!-- Bookmark -->
                    <form action="{% url 'bookmark_question' question.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="dropdown-item" style="display: inline-block;" name="bookmark">
                            <i class="fa-regular fa-bookmark fa-xl"></i>
                        </button>
                    </form> 
                </div>
                <hr>
                <div class="answers">
                    {% if answers %}
                    {% for answer in answers %}
                        {{answer}}
                    {% endfor%}
                    {% else %}
                        <h3>No answers yet</h3>
                    {% endif %}
                </div>
                
                
                
            </div>   
        </div>
        {% block javascript %}
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
        crossorigin="anonymous"></script>
        <!-- place project specific Javascript in this file -->

        <script src="{% static 'js/like_question.js' %}"></script>
        <script defer src="{% static 'js/project.js' %}"></script>
        <script src="https://kit.fontawesome.com/6fa36f3b85.js" crossorigin="anonymous"></script>

        {% endblock %}
    {% endblock %}
</body>